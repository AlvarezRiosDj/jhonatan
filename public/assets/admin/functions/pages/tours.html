<!-- Inicio del contenido de tours -->


<link href="assets/admin/plugins/summernote/summernote-bs4.css" rel="stylesheet" />

<style>
.kv-avatar .krajee-default.file-preview-frame,.kv-avatar .krajee-default.file-preview-frame:hover {
margin: 0;
padding: 0;
border: none;
box-shadow: none;
text-align: center;
}
.kv-avatar {
display: inline-block;
}
.kv-avatar .file-input {
display: table-cell;
width: 213px;
}
.kv-reqd {
color: red;
font-family: monospace;
font-weight: normal;
}
i[id^='edit']{
    cursor: pointer;
}




</style>




<form class="form form-vertical" id="form-tour" enctype="multipart/form-data">
	<div class="card-box">
  <div class="row">
    	<div class="col-sm-12 text-center">
            <div class="kv-avatar">
                <div class="file-loading">
                    <input id="input-img-tour" name="input-img-tour" type="file">
                </div>
            </div>
            <div class="kv-avatar-hint"><small>Select file < 1500 KB</small></div>
            <div id="kv-avatar-errors-1" class="center-block" style="width:800px;display:none"></div>
        </div>
    </div>
	<div class="row">
		<div class="col-sm-4">
          <div class="form-group">
            <label for="input-title-tour">Titulo </label>
            <input type="text" class="form-control" name="input-title-tour" id="nput-title-tour">
          </div>
        </div>
        <div class="col-sm-4">
          <div class="form-group">
            <label for="input-price-tour">Precio</label>
            <input type="number" class="form-control" name="input-price-tour" id="input-price-tour">
          </div>
        </div>
        <div class="col-sm-4">
          <div class="form-group">
            <label for="input-title-tour">Slider</label>          
            <select name="inpt-slider-tour" id="input-slider-tour" class="form-control">
            	<option value="">slideres</option>
            </select>
          </div>
        </div>
	</div>

	<div class="row">
		<div class="col-sm-12">
	   	<label for="input-short-description">Descripcion corta</label>
		<textarea name="input-short-description" id="input-short-description" cols="30" rows="5" class="form-control"></textarea>
		  </div>
		</div>
	
	<div class="row">
		<div class="col-sm-12">
		  <div class="form-group">
		   	<label for="input-description-tour">Descripcion Completa</label>
			<textarea name="input-description-tour" id="input-description-tour" class="summernote"></textarea>
		  </div>
		</div>
	</div>




</div>

	<div class="card-box">
	<h4>SEO</h4>
	<div class="row">
		<div class="col-sm-6">
			<div class="form-group">
            <label for="input-meta-description-tour">Meta description</label>
            <input type="number" class="form-control" name="input-meta-description-tour" id="input-meta-description-tour" >
          </div>
		</div>
		<div class="col-sm-6">
			<div class="form-group">
            <label for="input-meta-keywords-tour">Meta Keywords</label>
            <input type="number" class="form-control" name="input-meta-keywords-tour" id="input-meta-keywords-tour" >
          </div>
		</div>
	</div>
	</div>

	<div class="card-box">
	<div class="row">
		<div class="col-sm-4">
			<div class="form-group">
            <label for="input-lang-tour">Seleccione el  lenguaje</label>
           	<select name="input-lang-tour" id="input-lang-tour" class="form-control"></select>
          </div>
		</div>
		<div class="col-sm-4">
			<div class="form-group">
            <label for="input-categorie-tour">Seleccione la categoria </label>
           	<select name="input-categorie-tour" id="input-categorie-tour" class="form-control"></select>
          </div>
		</div>
		<div class="col-sm-4">
			<div class="form-group">
            <label for="input-status-tour">Estado</label>
           	<select name="input-status-tour" id="input-status-tour" class="form-control">
           		<option value="habilitado">habilitado</option>
           		<option value="deshabilitado">deshabilitado</option>
           	</select>
          </div>
		</div>
	
	</div>
  <div class="row">
    <div class="col-sm-8">
      <label for="">Slug (es la url amigable)</label>
      <input type="" name="input-slug-tour" class="form-control">
    </div>
    <div class="col-sm-4">
      <div class="form-group">
            <hr>
            <div class="text-right">
              <button type="submit" class="btn btn-primary">Guardar</button>
        
            </div>
          </div>
    </div>
  </div>
		
	</div>

</form>

<div class="card-box">
	<table id="table-tour" class="table table-bordered">
  <thead>
    <tr>
      <th>id</th>
      <th>Titulo</th>
      <th>Descripcio corta</th>
      <th>Email</th>
      <th>Privilegio</th>
      <th>Modificacion</th>
      <th>Acciones</th>

    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>



<!-- fin del contenido del users-->

<!-- inicio del scrip de users-->




<!--form summernote-->
<script src="assets/admin/plugins/summernote/summernote-bs4.min.js"></script>
<script>
            jQuery(document).ready(function(){

                $('.summernote').summernote({
                    height: 350,                 // set editor height
                    minHeight: null,             // set minimum height of editor
                    maxHeight: null,             // set maximum height of editor
                    focus: false                 // set focus to editable area after initializing summernote
                });

                $('.inline-editor').summernote({
                    airMode: true
                });

            });
        </script>

<script>
	$("#input-img-tour").fileinput({
    overwriteInitial: true,
    maxFileSize: 10000,
    showClose: false,
    showCaption: false,
    browseLabel: '',
    removeLabel: '',
    browseIcon: '<i class="fa fa-folder-open"></i>',
	removeIcon: '<i class="ion-close"></i>',
    removeTitle: 'Cancel or reset changes',
    elErrorContainer: '#kv-avatar-errors-1',
    msgErrorClass: 'alert alert-block alert-danger',
    defaultPreviewContent: '<i class="fa fa-file-photo-o"></i>',
    layoutTemplates: {main2: '{preview} ' + ' {remove} {browse}'},
    allowedFileExtensions: ["jpg", "png", "gif"]
});
</script>


<script>
	$(function(){


	//iniciamos el datatable
		$('#table-tour').DataTable();




	//recuperamos los lenguages
	function recuperaLang(){
		$.ajax({
      url:'lang',
      method:'GET'
    }).done(function(data){
      cadenLang='';
      $(data).each(function(key,value){

        cadenLang+='<option value="'+value['id']+'">'+value['name']+'</option>'
      });
      $('#input-lang-tour').html(cadenLang);
    });
	}


  //llamaos a la funcion para recuperar los lenguajes
  recuperaLang();


  //evento al cambiar el lenguaje para recuperar la categoria
    $('#input-lang-tour').change(function(){
      recuperaCategoria($(this).val());
    });


  //input-categorie-tour




	//recuperamos las categorias


	function recuperaCategoria(idLang){
      $.ajax({
      url:'/categorie',
      method:'GET',
      data:{id:idLang}
    }).done(function(data){
      var categorias;
        for(ct in data.categorie){
          categorias+='<option value="'+data.categorie[ct].id+'">'+data.categorie[ct].name+'</option>';       
        }

        $('#input-categorie-tour').html(categorias);
    }).fail(function(data){
        alert("ha ocurrido un error al recuperar");
    });
		  
	}


  //validamos en formulario antes de enviarlo

  $('#form-tour').validate({
    rules:{
      'input-img-tour':{required:true},
      'input-title-tour':{required:true},
      'input-price-tour':{required:true},
      'input-short-description':{required:true},
      'input-description-tour':{required:true},
      'input-lang-tour':{required:true},
      'input-categorie-tour':{required:true},
      'input-status-tour':{required:true}
    },
    messages:{
      'input-img-tour':{required:"Seleccione una imagen"},
      'input-title-tour':{required:"Por favor ingrese el titulo"},
      'input-price-tour':{required:"Por favor ingrese el precio"},
      'input-short-description':{required:"Por favor ingrese una descripcion corta"},
      'input-description-tour':{required:"Por favor ingrese la descripcion completa"},
      'input-lang-tour':{required:"Por favor seleccione el lenguaje"},
      'input-categorie-tour':{required:"Por favor seleccione la categoria"},
      'input-status-tour':{required:"Por favor seleccione el estado"}
    },
    submitHandler:function(form){
      var storeTour = new FormData($('#form-tour')[0]);
        $.ajax({
          url:'turismo',
          headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
          method:'POST',
          processData:false,
          contentType:false
        }).done(function(data){
          alert(data);
        }).fail(function(data){
          alert("ha ocurrido un error");
        });
    }
  });

	});
</script>

<!-- Fin de script para el tours -->



